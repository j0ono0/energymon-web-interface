{% args networks %}

<!DOCTYPE html>
<html lang="en">
    {% include 'head.tpl' %}
	<body>
       {% include 'masthead.tpl' %}
        <div id="vue_app" class="pagesection">
            <div class="component">
               {% include 'component_header.tpl' 'Networks' %}
                <div class="ui__body">
                     <ul class="navlist">
                        {% for network in networks %}
                        <li>
                            <a 
                                v-on:click.prevent="accordion({{ network.id }})"
                                href="#"
                            >
                                {{ network.ssid }}
                                {% if network.connected %}<span class="details"> Connected</span>
                                {% elif network.pwd %}<span class="details"> Remembered</span>{% endif %}
                            </a>
                            {% include 'network_details.tpl' %}
                        </li>
                        {% endfor %}
                    </ul>
                    <ul class="navlist">
                        <li>
                            <a
                                v-on:click.prevent="accordion('new')"
                                href="#"
                            >
                                [+] Add network
                            </a>
                            {% include 'network_new.tpl' %}
                        </li>
                    </ul>
                </div>
            </div>
        </div>
       {% include 'footer.tpl' %}
       <script>
                   
            var app = new Vue({
                el: '#vue_app',
                delimiters: ["[[","]]"],
                data:{
                    serverMessage: '0'
                },
                methods:{
                    accordion: function(id){
                        var acc = this.$refs['acc_'+id]

                        if(acc.offsetHeight == 0){
                            // Open accordion
                            acc.style.height = acc.firstChild.offsetHeight + 'px';
                        }else{
                            // Close accordion
                            acc.style.height = '0'
                        }
                    }
                },
                created:function(){
                    var source = new EventSource("event");
                    source.onmessage = function(event) {
                        this.serverMessage = event.data;
                    }.bind(this)
                    source.onerror = function(error) {
                        console.log(error);
                    }
                }
            })
        </script>
	</body>
</html>